# Лабораторная работа №10

- [Лабораторная работа №10](#лабораторная-работа-10)
    - [Инструкции по запуску проекта](#инструкции-по-запуску-проекта)
    - [Задания](#задания)
    - [Примеры использования](#примеры-использования)
    - [Список использованных источников](#список-использованных-источников)

## Инструкции по запуску проекта
1) Склонируйте репозиторий с проектом: git clone [https://github.com/S1ngle777/Lab_9_PHP.git](https://github.com/S1ngle777/Lab_9_PHP.git).
2) Запустите веб-сервер: php -S localhost:8080.
3) Откройте браузер и перейдите по адресу http://localhost:8080 для доступа к заданию.

## Задания
__Задание 1.__ Создайте базу данных “event_platform”.

__Задание 2.__ Создайте следующие таблицы в базе данных и корректно установите между
ними отношения.

2.1. Структура таблицы `users`: пользователи

1. `id` (integer) — primary key
2. `name`
3. `surname`
4. `email` — unique key

2.2. Структура таблицы `events`: мероприятия

1. `id`
2. `name`: название мероприятия
3. `price`: цена мероприятия
4. `number_seats`: количество мест
5. `date`: дата и время

2.3. Структура таблицы `event_records`: записи на мероприятие

1. `id`
2. `user_id`: id пользователя
3. `event_id`: id мероприятия

2.4. Структура таблицы `roles`: роли (user / manager)

1. `id`
2. `name`: название роли


__Задание 3.__ Внесите изменения в таблицу пользователей, добавив поле role_id,
содержащее идентификатор определенной роли.

__Задание 4.__ Создайте четыре страницы:

- Страница с текущими мероприятиями
- Страница для записи на определенное мероприятие
- Регистрация
- Авторизация

__Задание 5.__ Разработайте административную панель (доступную только пользователю с
ID 'manager'), обладающую следующим функционалом:

- Добавление и изменение мероприятия
- Просмотр зарегистрированных на мероприятие.


__Задание 6.__ Сохраняйте все необходимые данные в базе данных.

## Дополнительные задания

__Задание 7 (1 уровень сложности).__ Создайте более сложную схему ролей.

| Таблица `roles` | Таблица `capabilities` | Таблица `roles_capabilities` |
|----------|----------|----------|
| Содержит список ролей, например,  | Описывает возможности ролей, например,  | Связывает роли с их возможностями, определяя, какие возможности доступны для каждой роли.   |
| - user| - can_view_panel          | - `id`        |
| - manager         | - can_edit_event          | - `role_id`      |
| - `id`            | - `id`          | - `capability_id`        |
| - `name` — название роли        | - `name` — название возможности          |

__Задание 8 (2 уровень сложности).__ Реализуйте систему аутентификации на основе
токенов. В таблице users добавьте поле token, которое будет использоваться для
хранения токенов пользователей: 

1. Когда пользователь входит в систему (например, вводит логин и пароль), сервер
проверяет его учетные данные. Если они верны, сервер создает уникальный токен
доступа.
2. Клиент сохраняет полученный токен, обычно в localStorage или cookies браузера,
чтобы иметь доступ к нему на протяжении сеанса работы.
3. Каждый раз, когда клиент отправляет запрос к защищенным ресурсам сервера, он
должен включать токен в заголовке запроса или в другом безопасном месте.
4. Сервер получает запрос и проверяет переданный токен. Он проверяет, действителен
ли токен и имеет ли он права доступа к запрашиваемому ресурсу.


## Примеры использования

## Список использованных источников

